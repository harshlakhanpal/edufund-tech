(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{24:function(e,t,a){e.exports=a.p+"static/media/view-arrow.eccd1885.svg"},42:function(e,t,a){e.exports=a.p+"static/media/logout.e797dbae.svg"},43:function(e,t,a){e.exports=a.p+"static/media/home.b8dd6818.svg"},44:function(e,t,a){e.exports=a.p+"static/media/delete.68ee63aa.svg"},45:function(e,t,a){e.exports=a.p+"static/media/loader.8ab7e767.gif"},46:function(e,t,a){e.exports=a(78)},55:function(e,t,a){},56:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),s=a.n(c),o=a(11),l=a(3),u=a(18),i=a(41),m=a(9),p={appLoading:!1,drawerVisibility:!1,user:{}},d=[i.a],g=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,f=Object(u.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"TOGGLE_DRAWER":return Object(m.a)(Object(m.a)({},e),{},{drawerVisibility:!e.drawerVisibility});case"TOGGLE_LOADING":return Object(m.a)(Object(m.a)({},e),{},{appLoading:!e.appLoading});case"LOGIN":return Object(m.a)(Object(m.a)({},e),{},{user:n});case"LOGOUT":return localStorage.clear(),Object(m.a)({},e);default:return e}}}),b=Object(u.e)(f,g(u.a.apply(void 0,d))),v=(a(55),a(56),a(57),a(6)),E=a(1),h=a.n(E),O=a(5),y=function(e){return{type:"LOGIN",payload:e}},j=a(42),N=a.n(j),C=a(43),k=a.n(C),x=a(4),w=function(){var e=Object(x.g)(),t=Object(x.h)(),a=Object(l.c)((function(e){return e.app.user})),n=!!(Object.keys(a).length>0||localStorage.getItem("user")),c=Object(l.b)();return console.log("header render"),r.a.createElement("div",{className:"app-header"},n&&r.a.createElement("span",{style:{marginLeft:"1rem"},onClick:function(){return"/home"!==t.pathname?e.push("/home"):null}},r.a.createElement("img",{src:k.a,alt:"home",className:"icon"})),r.a.createElement("h2",null,"SurveyHome"),n&&r.a.createElement("span",{style:{marginRight:"1rem"},onClick:Object(O.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c({type:"LOGOUT"});case 2:e.push("/login");case 3:case"end":return t.stop()}}),t)})))},r.a.createElement("img",{src:N.a,alt:"logout",className:"icon"})))},S=a(8),G=a(19),L=a.n(G),I=a(10),A=a.n(I),T=function(){var e=Object(n.useState)({}),t=Object(S.a)(e,2),a=t[0],c=t[1],s=Object(l.b)(),o=Object(x.g)(),u=Object(x.i)().id,i=Object(n.useState)(""),p=Object(S.a)(i,2),d=p[0],g=p[1],f=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("/api/survey/".concat(u));case 2:t=e.sent,a=t.data,console.log(a),c(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){f()}),[]);var b=function(){var e=Object(O.a)(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(localStorage.getItem("user"))._id,""!==d.trim()){e.next=4;break}return v.b.error("Cannot submit empty response",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1}),e.abrupt("return");case 4:return a.responses.unshift({body:d,userId:t,createdAt:(new Date).toISOString()}),s({type:"TOGGLE_LOADING"}),e.prev=6,e.next=9,A.a.put("/api/survey/".concat(u),Object(m.a)({},a));case 9:n=e.sent,(r=n.data).error?v.b.error(r.error,{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1}):(v.b.success("Response submitted successfully!",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1}),o.push("/home"));case 12:return e.prev=12,s({type:"TOGGLE_LOADING"}),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[6,,12,15]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("section",{className:"post-page"},r.a.createElement("div",null,a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{style:{fontSize:"1.65rem"}},a.subject),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"1rem"}},r.a.createElement("p",{style:{textAlign:"end"}},"Posted by ".concat(a.username))))),r.a.createElement("div",{className:"textarea-container"},r.a.createElement("textarea",{className:"input",style:{marginBottom:"0"},rows:"4",placeholder:"Type your answer here.",value:d,onChange:function(e){g(e.target.value)}}),r.a.createElement("button",{className:"btn",onClick:b},"Submit")))))},_=a(24),D=a.n(_),P=function(){var e=Object(n.useState)([]),t=Object(S.a)(e,2),a=t[0],c=t[1],s=Object(l.b)(),o=Object(x.g)(),u=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"TOGGLE_LOADING"}),e.prev=1,e.next=4,A.a.get("/api/mysurveys",{headers:{authorization:JSON.parse(localStorage.getItem("token"))}});case 4:t=e.sent,a=t.data,console.log(a),c(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:return e.prev=13,s({type:"TOGGLE_LOADING"}),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){u()}),[]),r.a.createElement("section",{className:"home"},r.a.createElement("h1",{style:{textAlign:"center"}},"Surveys created by me"),a.length>0?a.map((function(e){var t=e.username,a=e.subject,n=e.createdAt,c=e._id;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"info"},r.a.createElement("p",{style:{fontSize:"1.65rem",padding:"1.3rem"}},a),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem"}},r.a.createElement("p",null,t),r.a.createElement("p",null,L()(n).fromNow()))),r.a.createElement("div",{className:"action",onClick:function(){return o.push("/home/mysurveys/".concat(c))}},r.a.createElement("img",{src:D.a,alt:"View post",className:"icon"})))})):r.a.createElement("h1",{style:{textAlign:"center",marginTop:"1rem"}}," ","You haven't created any surveys yet."))},B=a(44),R=a.n(B),H=function(){var e=Object(n.useState)({}),t=Object(S.a)(e,2),a=t[0],c=t[1],s=Object(l.b)(),o=(Object(x.g)(),Object(x.i)().id),u=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("/api/survey/".concat(o));case 2:t=e.sent,a=t.data,console.log(a),c(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){u()}),[]);var i=function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.responses=a.responses.filter((function(e){return e.id!==t})),console.log(a),s({type:"TOGGLE_LOADING"}),e.prev=3,e.next=6,A.a.put("/api/survey/".concat(o),Object(m.a)({},a));case 6:return e.next=8,c(a);case 8:v.b.success("Response deleted successfully!",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:return e.prev=14,s({type:"TOGGLE_LOADING"}),e.finish(14);case 17:console.log(a);case 18:case"end":return e.stop()}}),e,null,[[3,11,14,17]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("section",{className:"post-page"},r.a.createElement("div",null,a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{style:{fontSize:"1.65rem"}},a.subject),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"1rem"}},r.a.createElement("p",{style:{textAlign:"end"}},"Posted by ".concat(a.username))))),a.responses&&a.responses.length>0?a.responses.map((function(e){var t=e.body,a=(e.createdAt,e.id);return r.a.createElement("div",{className:"comment"},r.a.createElement("span",{style:{wordBreak:"break-all"}},t),r.a.createElement("span",{style:{alignSelf:"flex-end"},onClick:function(){return i(a)}},r.a.createElement("img",{src:R.a,alt:"Delete comment",className:"icon"})))})):r.a.createElement("h1",{style:{textAlign:"center",marginTop:"1rem"}},"No responses yet."))))},J=function(){var e=Object(x.g)(),t=Object(x.h)(),a=JSON.parse(localStorage.getItem("user"))||{},n=!!a&&a.isCoordinator;return r.a.createElement(r.a.Fragment,null,n?"/home/create_survey"!==t.pathname?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mysurveys",onClick:function(){return"/home/mysurveys"!==t.pathname?e.push("/home/mysurveys"):null}},"My Surveys"),r.a.createElement("div",{className:"footer",onClick:function(){return e.push("/home/create_survey")}},"Create a new Survey")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mysurveys",onClick:function(){return"/home/mysurveys"!==t.pathname?e.push("/home/mysurveys"):null}},"My Surveys"),r.a.createElement("div",{className:"footer"},"Create a new Survey")):null)},z=a(25),F=function(e){var t=e.component,a=void 0===t?null:t,n=e.render,c=void 0===n?null:n,s=Object(z.a)(e,["component","render"]),o=JSON.parse(localStorage.getItem("user"))||{},l=!!o&&o.isCoordinator;return r.a.createElement(x.b,Object.assign({},s,{render:function(e){return l?c?c(e):a?r.a.createElement(a,e):null:r.a.createElement(x.a,{to:"/home"})}}))},V=function(){var e=Object(x.g)();return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}," ",r.a.createElement("h1",{className:"title"},"Welcome"),r.a.createElement("div",{style:{display:"block",marginTop:"1rem"}},r.a.createElement("button",{className:"btn",onClick:function(){return e.push("/login")}},"Login"),r.a.createElement("button",{className:"btn",onClick:function(){return e.push("/register")}},"Sign up")))},M=function(){var e=Object(n.useState)([]),t=Object(S.a)(e,2),a=t[0],c=t[1],s=Object(l.b)(),o=Object(x.g)(),u=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"TOGGLE_LOADING"}),e.prev=1,e.next=4,A.a.get("/api/surveys",{headers:{authorization:JSON.parse(localStorage.getItem("token"))}});case 4:t=e.sent,a=t.data,console.log(a),c(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:return e.prev=13,s({type:"TOGGLE_LOADING"}),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){u()}),[]),r.a.createElement("section",{className:"home"},r.a.createElement("h1",{style:{textAlign:"center"}},"Surveys you are eligible for"),a.length>0?a.map((function(e){var t=e.username,a=e.subject,n=e.createdAt,c=e._id;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"info"},r.a.createElement("p",{style:{fontSize:"1.65rem",padding:"1.3rem"}},a),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem"}},r.a.createElement("p",null,t),r.a.createElement("p",null,L()(n).fromNow()))),r.a.createElement("div",{className:"action",onClick:function(){return o.push("/home/".concat(c))}},r.a.createElement("img",{src:D.a,alt:"View post",className:"icon"})))})):r.a.createElement("h1",{style:{textAlign:"center",marginTop:"1rem"}}," ","No more surveys left for you to respond to."))},U=a(45),W=a.n(U),X=function(){return r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"},r.a.createElement("img",{src:W.a})))},Y=function(){var e=Object(x.g)(),t=Object(l.b)(),a=Object(n.useState)(""),c=Object(S.a)(a,2),s=c[0],o=c[1],u=Object(n.useState)(""),i=Object(S.a)(u,2),m=i[0],p=i[1];Object(n.useEffect)((function(){localStorage.getItem("user")&&e.push("/home")}),[]);var d=function(){var a=Object(O.a)(h.a.mark((function a(){var n,r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"TOGGLE_LOADING"}),a.prev=1,a.next=4,A.a.post("/auth/login",{email:s,password:m});case 4:if(n=a.sent,!(r=n.data).error){a.next=10;break}v.b.error(r.error,{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1}),a.next=16;break;case 10:return v.b.success("Login successful!",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1}),a.next=13,t(y(r));case 13:localStorage.setItem("token",JSON.stringify(r.token)),localStorage.setItem("user",JSON.stringify(r)),e.push("/home");case 16:return a.prev=16,t({type:"TOGGLE_LOADING"}),a.finish(16);case 19:case"end":return a.stop()}}),a,null,[[1,,16,19]])})));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Login"),r.a.createElement("input",{className:"input",name:"email",value:s,onChange:function(e){return o(e.target.value)},placeholder:"Enter your email"}),r.a.createElement("input",{className:"input",name:"password",type:"password",value:m,onChange:function(e){return p(e.target.value)},placeholder:"Enter your password"}),r.a.createElement("br",null),r.a.createElement("span",{onClick:function(){return e.push("/register")},className:"link"},"Not a member? Register here."),r.a.createElement("br",null),r.a.createElement("button",{className:"btn",onClick:d},"Login"),r.a.createElement("br",null))},q=function(){var e=Object(n.useState)(""),t=Object(S.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),o=Object(S.a)(s,2),u=o[0],i=o[1],m=Object(n.useState)("all"),p=Object(S.a)(m,2),d=p[0],g=p[1],f=Object(x.g)(),b=Object(l.b)(),E=function(){var e=Object(O.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b({type:"TOGGLE_LOADING"}),e.prev=1,e.next=4,A.a.post("/api/survey",{subject:a,minAge:""===u.trim()?18:Number(u),genderSpecific:d},{headers:{authorization:JSON.parse(localStorage.getItem("token"))}});case 4:t=e.sent,(n=t.data).error?v.b.error(n.error,{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1}):(v.b.success("Survey created successfully!",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1}),f.push("/home"));case 7:return e.prev=7,b({type:"TOGGLE_LOADING"}),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[1,,7,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"create-post"},r.a.createElement("h1",null,"Create a new survey"),r.a.createElement("textarea",{className:"input",style:{marginBottom:"0"},rows:"12",name:"subject",value:a,onChange:function(e){return c(e.target.value)},placeholder:"Enter the subject for your survey..."}),r.a.createElement("input",{className:"input",type:"number",name:"email",value:u,onChange:function(e){return i(e.target.value)},placeholder:"Set a minimum age(default - 18)"}),r.a.createElement("select",{className:"input select-field",name:"genderSpecific",onChange:function(e){g(e.target.value)}},r.a.createElement("option",{value:"all",selected:!0},"Default(All)"),r.a.createElement("option",{key:"male",value:"male"},"Male"),r.a.createElement("option",{key:"female",value:"female"},"Female")),r.a.createElement("button",{className:"btn",onClick:E},"Submit"))},K=a(23),Q=function(){var e=Object(x.g)(),t=Object(l.b)(),a=Object(n.useState)({name:"",email:"",password:"",confirmPassword:""}),c=Object(S.a)(a,2),s=c[0],o=c[1];Object(n.useEffect)((function(){localStorage.getItem("user")&&e.push("/home")}),[]);var u=function(e){return o(Object(m.a)(Object(m.a)({},s),{},Object(K.a)({},e.target.name,e.target.value)))},i=function(){var e=Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(Object(m.a)(Object(m.a)({},s),{},{isCoordinator:!s.isCoordinator}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(s);var p=function(){var a=Object(O.a)(h.a.mark((function a(){var n,r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"TOGGLE_LOADING"}),a.prev=1,a.next=4,A.a.post("/auth/register",Object(m.a)({},s));case 4:n=a.sent,(r=n.data).error?(console.log(r.error),v.b.error(r.error,{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})):(v.b.success("Registration successful!",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1}),setTimeout((function(){return e.push("/login")}),500));case 7:return a.prev=7,t({type:"TOGGLE_LOADING"}),a.finish(7);case 10:case"end":return a.stop()}}),a,null,[[1,,7,10]])})));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"register"},r.a.createElement("h1",null,"Register"),r.a.createElement("input",{className:"input",name:"name",value:s.name,onChange:u,placeholder:"Enter your Name"}),r.a.createElement("input",{className:"input",name:"email",value:s.email,onChange:u,placeholder:"Enter your email"}),r.a.createElement("div",{style:{display:"inline-block",color:"black"}},"Gender",r.a.createElement("input",{type:"radio",name:"gender",value:"male",onChange:u}),"Male",r.a.createElement("input",{type:"radio",name:"gender",value:"female",onChange:u}),"Female"),r.a.createElement("input",{className:"input",type:"number",name:"age",value:s.age,onChange:u,placeholder:"Enter your Age"}),r.a.createElement("input",{className:"input",name:"password",type:"password",value:s.password,onChange:u,placeholder:"Enter your password"}),r.a.createElement("input",{className:"input",name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:u,placeholder:"Confirm your password"}),r.a.createElement("input",{type:"checkbox",defaultChecked:!1,onChange:i})," ","Register as a coordinator!",r.a.createElement("br",null),r.a.createElement("span",{onClick:function(){return e.push("/login")},className:"link"},"Already a member ? Login here"),r.a.createElement("br",null),r.a.createElement("button",{className:"btn",onClick:p},"Register"),r.a.createElement("br",null))},Z=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Error 404: Page not found"),r.a.createElement("p",null,"This page isn't available. Try checking the URL or visit a different page."))},$=function(e){var t=e.component,a=void 0===t?null:t,n=e.render,c=void 0===n?null:n,s=Object(z.a)(e,["component","render"]);return r.a.createElement(x.b,Object.assign({},s,{render:function(e){return localStorage.getItem("token")?c?c(e):a?r.a.createElement(a,e):null:r.a.createElement(x.a,{to:"/login"})}}))},ee=function(){var e=Object(l.c)((function(e){return e.app.appLoading}));return r.a.createElement("div",{className:"app"},e&&r.a.createElement(X,null),r.a.createElement(w,null),r.a.createElement("div",{className:"content"},r.a.createElement(x.d,null,r.a.createElement(x.b,{exact:!0,path:"/",component:V}),r.a.createElement(x.b,{exact:!0,path:"/login",component:Y}),r.a.createElement(x.b,{exact:!0,path:"/register",component:Q}),r.a.createElement($,{exact:!0,path:"/home",component:M}),r.a.createElement($,{exact:!0,path:"/home/create_survey",component:q}),r.a.createElement(F,{exact:!0,path:"/home/mysurveys",component:P}),r.a.createElement(F,{exact:!0,path:"/home/mysurveys/:id",component:H}),r.a.createElement($,{exact:!0,path:"/home/:id",component:T}),r.a.createElement(Z,null))),r.a.createElement(J,null),r.a.createElement(v.a,{style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"}}))};s.a.render(r.a.createElement(o.a,null,r.a.createElement(l.a,{store:b},r.a.createElement(ee,null))),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.18fd5096.chunk.js.map